# API开发规范文档

API开发文档一切遵循`REST ful风格`

## API命名

所有API命名统一为: `/api/当前服务名/当前方法名`

具体命名方式根据业务环境进行变化。例如：商品服务中的添加商品api `/api/product/addProduct`

如果是对外开放的API则需要把版本号放入URL中: `api/当前服务名/v1/当前方法名`

## HTTP请求方式

这里只说明常用请求方式

| 方法 | 对应SQL命令 | 含义 | 举例 |
| -- | -- | -- | --
| GET | select | 从服务中获取资源(一个或多个) | /api/getUsers
| POST | create | 在服务中创建一个资源 | api/addUser
| PUT | update | 在服务中更新资源(客户端提供改变后的完整资源) | /api/updateUser/id(提供用户全部信息)
| PATCH | update | 在服务更新资源(客户端提供改变的属性) | /api/updateUser/id(提供用户部分信息)
| DELETE | delete | 从服务中删除资源 | /api/deleteUser

## 请求参数

`POST`, `PUT`, `PATCH`方式请求资源, 统一使用JSON格式传递参数。

### 查询/删除资源

使用方式`GET`

- 根据唯一标识查询/删除单个资源

    使用路径方式传递标识值, 体现出层级关系 `/api/product/getProductById/123123123`

- 根据非唯一标识查询/删除资源

    查询资源数据时不仅仅都是通过唯一标识值作为查询条件，也可能会使用资源对象内的某一个元素作为查询条件。 `/api/product/getProductByName?name=xxxx`

- 分页查询

    分页查询时, 我们一般需要传递两个参数作为分页的条件, `start`代表当前分页的页码, `pageSize`代表每页查询的资源数量。`/api/product/listProduct?start=1&pageSize=20`

## 状态码

在RESTful设计规范内我们需要充分的里面`HttpStatus`请求的状态码来判断一个请求发送状态，本次请求是否有效，常见的HttpStatus状态码如下所示：

| 状态码 | 含义 |
| -- | -- 
| 200 | 请求成功, 服务器成功返回用户数据,  该操作是幂等的 |
| 201 | 用户新建或修改数据成功 |
| 400 | 用户发出的请求有错误, 服务器没有进行修改或新建操作, 该操作是幂等的 |
| 401 | 用户没有权限(令牌, 用户名, 密码错误) |
| 403 | 用户得到授权, 但是访问是被禁止的 |
| 405 | 用户发出的请求是不存在的, 服务器没有进行操作, 该操作是幂等的 |
| 500 | 服务器发生错误, 用户无法判断发出的请求是否成功 |